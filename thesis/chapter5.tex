
\chapter{راه‌حل پیشنهادی}

مساله‌ی بیان شده به صورت \lr{ILP}
مدل‌سازی می‌شود.
در \cite{Eramo2016}
مساله‌ی جایگذاری \lr{SFC}ها با هدف حداکثرسازی تعداد درخواست‌های پذیرفته شده
به صورت \lr{ILP} مدل‌سازی شده و اثبات شده است که مساله‌ی حاضر \lr{NP-Hard} می‌باشد.
مساله‌ای که در اینجا مدل‌سازی می‌شود از آن مساله پیچیده‌تر می‌باشد زیرا در نظر گرفتن \lr{VNFM}ها را نیز شامل می‌شود.
برای این مساله می‌توان
یک راه حل مکاشفه‌ای با زمان چند جمله‌ای
پیشنهاد داد.

\section{الگوریتم مکاشفه‌ای}

مساله از دو قسمت تشکیل شده است. قسمت اول مساله‌ی جایگذاری لینک‌ها و نمونه‌ها می‌باشد
و قسمت دوم جایگذاری
\lr{VNFM}
برای زنجیره است.
برای قسمت اول راه‌حل‌های مکاشفه‌ای زیادی ارائه شده است که ما در اینجا
از راه‌حل \cite{Bari2015} استفاده می‌کنیم.
در این راه حل برای قرارگیری هر زنجیره یک گراف چند گامی شگل می‌گیرد.
هر گام این گراف نماینده یک نمونه از زنجیره است که می‌بایست قرار گیرد.
در نظر داشته باشید که در مساله‌ای اصلی نیازی نیست که حتما زنجیره‌ها به صورت خطی باشند اما در این راه‌حل این فرض وجود دارد
که البته فرضی نزدیک به واقعیت می‌باشد.
در هر گام از این گراف مجموعه‌ای از نودهای فیزیکی امکان پذیر شکل می‌گیرد.
با توجه به وضعیت مسیریابی این مجموعه با مجموعه بعدی نود فیزیکی برای نمونه مورد نظر از زنجیره انتخاب می‌شود.

\begin{figure}[h]
\center\includegraphics[scale=.45]{images/bari}
\caption{مدل‌سازی با گراف چندگامی \cite{Bari2015}}
\label{fig.5}
\end{figure}

منظور از وضعیت مسیریابی به شرح زیر است. برای هر یک از گام‌ها از الگوریتم جستجوی اول سطح یا
\lr{BFS}
استفاده می‌کنیم
و به این ترتیب مسیرهای فیزیکی که می‌توان از آن‌ها برای جایابی لینک مجازی استفاده کرد پیدا می‌کنیم.
از این بین گره‌ای که مسیرهای فیزیکی امکان‌پذیر بیشتری دارد انتخاب می‌گردد.
با این روش مجموعه امکان‌پذیر گام بعدی بزرگتر می‌شود و امکان حذف زنجیره به دلیل نبود مسیر فیزیکی
برای جایابی لینک مجازی کمتر می‌گردد.

در ادامه یک گام به این الگوریتم اضافه می‌کنیم که در آن برای هر زنجیره بعد از قرارگرفتن یک
\lr{VNFM}
تخصیص می‌دهیم. برای اینکار مجموعه‌ای امکان‌پذیر از نودهای فیزیکی را انتخاب می‌کنیم
و سعی می‌کنیم از بین آن‌ها انتخاب کنیم. در روند این انتخاب از اصول زیر پیروی می‌کنیم:

\begin{itemize}
    \item اولویت با نود فیزیکی است که روی آن \lr{VNFM} با ظرفیت خالی وجود دارد.
    \item از بین نودهایی که ظرفیت خالی دارند اولویت با نودی است که منابع پردازشی بیشتری دارد.
\end{itemize}

از آنجایی که مساله‌ی طرح شده به صورت آفلاین می‌باشد می‌توان با بررسی ورودی‌های الگوریتم کارآیی آن را بهبود داد.
برای این منظور زنجیره‌های ورودی را برحسب اندازه‌ی آن‌ها مرتب می‌کنیم.
در این مرتب‌سازی تلاش می‌شود که زنجیره‌های بزرگتر که سود بیشتری دارند زودتر جایابی شوند.
به این ترتیب برای زنجیره‌هایی که سود بیشتری دارند منابع بیشتری در اختیار الگوریتم قرار دارد.
